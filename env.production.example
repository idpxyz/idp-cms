# =============================================================================
# IDP-CMS 生产环境配置模板
# =============================================================================
# 复制此文件为 .env 并根据实际情况修改配置
# cp env.production.example .env

# =============================================================================
# Django 基础配置
# =============================================================================
DJANGO_SECRET_KEY=your-very-secure-secret-key-here-change-this-in-production
DJANGO_DEBUG=0
DJANGO_SETTINGS_MODULE=config.settings.prod

# 允许的主机名（生产环境必须设置）
DJANGO_ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com,api.yourdomain.com

# =============================================================================
# 数据库配置
# =============================================================================
POSTGRES_DB=idp_cms_prod
POSTGRES_USER=idp_cms_user
POSTGRES_PASSWORD=your-strong-db-password-here
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Redis配置
REDIS_URL=redis://redis:6379/0
REDIS_PASSWORD=your-redis-password-here

# =============================================================================
# OpenSearch配置
# =============================================================================
OPENSEARCH_URL=http://opensearch:9200
OPENSEARCH_USERNAME=admin
OPENSEARCH_PASSWORD=your-opensearch-password-here
OPENSEARCH_SECURITY_DISABLED=false

# =============================================================================
# MinIO配置
# =============================================================================
MINIO_ACCESS_KEY=your-minio-access-key
MINIO_SECRET_KEY=your-minio-secret-key
MINIO_BUCKET=media
MINIO_ENDPOINT=http://minio:9000

# =============================================================================
# 安全配置
# =============================================================================
# CORS允许的来源（生产环境必须限制）
CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com,https://portal.yourdomain.com

# CSRF信任的来源
CSRF_TRUSTED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# 会话配置
SESSION_COOKIE_DOMAIN=.yourdomain.com
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true

# =============================================================================
# 邮件配置
# =============================================================================
EMAIL_HOST=smtp.yourdomain.com
EMAIL_PORT=587
EMAIL_USE_TLS=true
EMAIL_HOST_USER=noreply@yourdomain.com
EMAIL_HOST_PASSWORD=your-email-password
DEFAULT_FROM_EMAIL=noreply@yourdomain.com

# =============================================================================
# 域名配置
# =============================================================================
SITE_HOSTNAME=yourdomain.com
NEXT_PUBLIC_FEED_API_URL=https://api.yourdomain.com
NEXT_PUBLIC_TRACK_URL=https://api.yourdomain.com/api/track

# =============================================================================
# 监控和日志
# =============================================================================
# 日志级别
LOG_LEVEL=INFO

# 监控配置
ENABLE_MONITORING=true
SENTRY_DSN=your-sentry-dsn-here

# =============================================================================
# 性能配置
# =============================================================================
# 缓存配置
CACHE_TIMEOUT=300
API_CACHE_TIMEOUT=600

# 数据库连接池
DB_MAX_CONNS=50
DB_CONN_MAX_AGE=60

# =============================================================================
# 第三方服务配置
# =============================================================================
# 支付服务（如Stripe）
STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-key
STRIPE_SECRET_KEY=sk_test_your-stripe-secret

# 身份认证服务（如Logto）
LOGTO_ENDPOINT=https://your-logto-instance.com
LOGTO_APP_ID=your-app-id
LOGTO_APP_SECRET=your-app-secret

# CDN配置
CDN_ENABLED=true
CDN_DOMAIN=cdn.yourdomain.com
CDN_SECRET_KEY=your-cdn-secret-key

# =============================================================================
# 开发工具配置（生产环境禁用）
# =============================================================================
ENABLE_DEBUG_TOOLBAR=false
ENABLE_SILK_PROFILER=false
ENABLE_DJANGO_EXTENSIONS=false

# =============================================================================
# 备份配置
# =============================================================================
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=backups
BACKUP_S3_REGION=us-east-1

# =============================================================================
# 安全扫描配置
# =============================================================================
# 启用安全扫描
SECURITY_SCAN_ENABLED=true
SECURITY_SCAN_SCHEDULE=0 2 * * *  # 每天凌晨2点

# 漏洞扫描白名单
SECURITY_SCAN_WHITELIST=192.168.1.0/24,10.0.0.0/8

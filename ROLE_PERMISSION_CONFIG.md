# 🔐 用户组权限配置报告

**配置日期**：2025-11-07  
**系统**：IDP-CMS 内容管理系统

---

## 📊 权限配置总览

### 🏷️ Editors（编辑）

**角色定位**：内容创作者

#### 📺 频道权限
- ✅ **查看频道**：可以查看所有频道
- ❌ **编辑频道设置**：不能修改频道配置
- ❌ **发布文章**：不能直接发布文章
- **可访问范围**：所有频道（12个）

#### 📄 Wagtail 页面权限（12个）
- ✅ **创建页面**：可以创建文章草稿
- ✅ **编辑页面**：可以编辑文章内容
- ❌ **发布页面**：不能发布文章（需要版主审核）
- ✅ **查看页面**：可以查看所有页面
- ✅ **文档管理**：可以添加、修改、删除文档
- ✅ **图片管理**：可以添加、修改、删除图片

#### 🎯 工作职责
1. 创建文章草稿
2. 编辑文章内容
3. 上传图片和文档
4. 提交给版主审核
5. **不能直接发布**（需要版主审核）

---

### 🏷️ Moderators（版主）

**角色定位**：内容审核者和发布者

#### 📺 频道权限
- ✅ **查看频道**：可以查看所有频道
- ✅ **编辑频道设置**：可以修改频道配置
- ✅ **发布文章**：可以发布文章
- **可访问范围**：所有频道（12个）

#### 📄 Wagtail 页面权限（15个）
- ✅ **创建页面**：可以创建文章
- ✅ **编辑页面**：可以编辑任何文章
- ✅ **发布页面**：可以发布文章到线上
- ✅ **删除页面**：可以删除文章
- ✅ **锁定页面**：可以锁定/解锁页面
- ✅ **查看页面**：可以查看所有页面
- ✅ **文档管理**：完整的文档管理权限
- ✅ **图片管理**：完整的图片管理权限

#### 🎯 工作职责
1. 审核编辑提交的文章
2. 修改和完善文章内容
3. **发布文章到线上**
4. 管理已发布的文章
5. 配置频道设置

---

## 🔄 内容发布工作流

```
┌─────────────┐
│   Editors   │
│   (编辑)    │
└──────┬──────┘
       │
       │ 1. 创建文章草稿
       │ 2. 编辑内容
       │ 3. 上传图片
       │
       ▼
┌─────────────┐
│  草稿状态    │
│  (Draft)    │
└──────┬──────┘
       │
       │ 4. 提交审核
       │    ❌ 编辑不能发布
       │
       ▼
┌─────────────┐
│ Moderators  │
│   (版主)    │
└──────┬──────┘
       │
       │ 5. 审核内容
       │ 6. 修改完善
       │ 7. ✅ 发布
       │
       ▼
┌─────────────┐
│  已发布      │
│ (Published) │
└─────────────┘
```

---

## 📺 系统频道列表

系统中共有 **12个频道**，全部启用：

1. 时政新闻 (politics)
2. 党建廉政 (party)
3. 法治军事 (law-military)
4. 经济产业 (economy)
5. 房产消费 (property)
6. 社会民生 (society)
7. 教育健康 (edu-health)
8. 科技创新 (tech)
9. 乡村振兴 (rural)
10. 文化旅游 (culture)
11. 体育娱乐 (sports)
12. 视频专题 (special)

---

## 👥 用户管理

### 当前用户
- **超级管理员**：1人（admin）
- **Editors 用户组**：0人（待添加）
- **Moderators 用户组**：0人（待添加）

### 添加用户到用户组

**步骤**：
1. 登录后台：http://8.133.22.7:8000/admin/
2. 进入 **设置** → **用户**
3. 编辑用户或创建新用户
4. 在 **用户组** 部分勾选对应的用户组
5. 保存

---

## ✅ 权限验证清单

### Editors（编辑）测试

- [ ] 登录后台成功
- [ ] 能看到所有频道
- [ ] 能创建文章草稿
- [ ] 能编辑文章内容
- [ ] 能上传图片和文档
- [ ] **不能看到"发布"按钮**（关键验证）
- [ ] 不能修改频道设置

### Moderators（版主）测试

- [ ] 登录后台成功
- [ ] 能看到所有频道
- [ ] 能创建文章
- [ ] 能编辑任何文章
- [ ] **能看到并使用"发布"按钮**（关键验证）
- [ ] 能删除文章
- [ ] 能修改频道设置

---

## 🔧 配置详情

### 频道权限表（core_channel_group_permission）

| 用户组 | 可查看 | 可编辑 | 可发布 | 可访问频道 |
|--------|--------|--------|--------|-----------|
| Editors | ✅ | ❌ | ❌ | 所有频道 |
| Moderators | ✅ | ✅ | ✅ | 所有频道 |

### Django 权限

**Editors**：12个权限
- wagtailadmin.access_admin
- wagtaildocs.* (文档管理)
- wagtailimages.* (图片管理)
- wagtailcore.add_page
- wagtailcore.change_page
- wagtailcore.view_page

**Moderators**：15个权限
- 包含 Editors 的所有权限
- wagtailcore.delete_page
- wagtailcore.publish_page ⭐（关键差异）
- wagtailcore.lock_page

---

## 🎯 优势总结

1. **内容质量保证**：所有文章都需经过版主审核
2. **权责明确**：编辑创作，版主把关
3. **防止误发布**：编辑无法直接发布，避免错误内容上线
4. **符合新闻行业规范**：编审分离，双重检查
5. **灵活扩展**：可根据需要为不同频道设置不同权限

---

## 📝 注意事项

1. **用户重新登录**：配置权限后，用户需要重新登录才能生效
2. **超级管理员**：admin 用户不受权限限制，可以访问所有功能
3. **频道权限优先级**：频道权限会覆盖 Wagtail 原生权限
4. **权限调整**：如需调整权限，进入后台的"频道权限管理"或"用户组"设置

---

## 🆘 常见问题

### Q1: Editors 看不到"发布"按钮吗？
**A**: 是的，这是设计的核心功能。Editors 只能保存草稿，必须由 Moderators 审核后发布。

### Q2: 如何让某个 Editor 也能发布？
**A**: 将该用户同时添加到 Moderators 用户组，或者升级为超级管理员。

### Q3: 能否为不同频道设置不同的权限？
**A**: 可以！在"频道权限管理"中，为用户组选择特定的频道即可。

### Q4: Moderators 能看到所有 Editors 的草稿吗？
**A**: 是的，Moderators 可以查看和编辑所有页面，包括草稿。

---

## 📞 技术支持

如需调整权限配置，请联系系统管理员或参考：
- 频道权限文档：`CHANNEL_PERMISSION_GUIDE.md`
- 快速入门：`CHANNEL_PERMISSION_QUICK_START.md`

---

**配置完成时间**：2025-11-07  
**最后更新**：2025-11-07


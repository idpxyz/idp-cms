{
    "size": 50,
    "query": {
        "function_score": {
            "query": {
                "bool": {
                    "filter": [
                        {
                            "term": {
                                "site": "__SITE__"
                            }
                        },
                        {
                            "term": {
                                "channel": "ai-tutorials"
                            }
                        },
                        {
                            "range": {
                                "publish_time": {
                                    "gte": "now-__HOURS__h"
                                }
                            }
                        }
                    ],
                    "must_not": [
                        {
                            "terms": {
                                "article_id.keyword": "__SEEN_IDS__"
                            }
                        }
                    ],
                    "should": [
                        {
                            "term": {
                                "category": "__CATEGORY__"
                            }
                        },
                        {
                            "term": {
                                "difficulty": "__DIFFICULTY__"
                            }
                        },
                        {
                            "term": {
                                "is_hot": true
                            }
                        },
                        {
                            "term": {
                                "is_free": true
                            }
                        }
                    ]
                }
            },
            "functions": [
                {
                    "exp": {
                        "publish_time": {
                            "origin": "now",
                            "scale": "48h",
                            "decay": 0.5
                        }
                    }
                },
                {
                    "field_value_factor": {
                        "field": "rating",
                        "factor": 2,
                        "missing": 1
                    }
                },
                {
                    "field_value_factor": {
                        "field": "student_count",
                        "factor": 0.1,
                        "missing": 1
                    }
                }
            ],
            "score_mode": "sum",
            "boost_mode": "multiply"
        }
    }
}